<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="/favicon.png">
    <link rel="stylesheet" href="styles/butestrap.css">
    <link rel="stylesheet" href="styles/default.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <title>Tech2Gether</title>

</head>

<body>
    <header>
        <a id="logo" href="index.html">
            <img src="img/tech2gether_logo.png" alt="Tech2Gether Logo">
        </a>
        <nav>
            <ul class="navbar">
                <li><a class="btn" href="index.html">Home</a></li>
                <li><a class="btn" href="about.html">About</a></li>
                <li><a class="btn" href="sponsors.html">Sponsors</a></li>
            </ul>
        </nav>
        <div class="margin-auto timer">
            <p class="timer-title dare">Next<br>Meeting</p>
            <div class="timer-clock">
                <p class="timer-days">00</p>
                <p class="timer-hours">00</p>
                <p class="timer-minutes">00</p>
                <p class="timer-seconds">00</p>
            </div>
        </div>
    </header>

    <main class="text-center">
        <h1 class="dare font-huge">Next Meeting</h1>
        <section class="flex-container center-box margin-top-3 margin-bottom-3">
            <div class="flex-container-80 speaker box">
                <div class="speaker-title-name margin-auto">
                    <div class="speaker-info flex-container">
                        <div class="text-center">
                            <h2 id="meeting-title" class="margin-top-3 margin-bottom-4 dare font-extra-large"></h2>
                            <h3 id="meeting-speaker" class="margin-bottom-4 dare"></h3>
                            <p id="meeting-description-large" class="margin-bottom-3 padding-2"></p>
                        </div>
                    </div>
                    <img id="meeting-image" class="margin-auto padding-2" src="img/thumbnails/placeholder.png" style="float: left;" alt="Presentation thumbnail">
                </div>
                <div class="speaker-info speaker-desc flex-container margin-auto">
                    <p id="meeting-description-medium" class="margin-bottom-3 padding-2"></p>
                    <p id="meeting-location" class="dare"></p>
                    <p id="meeting-schedule" class="dare"></p>
                    <div id="meeting-buttons" class="flex-container margin-top-4 speaker-buttons"></div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="text-center">
            <p>&copy; 2024 Tech2Gether</p>
            <p class="dare">Engaging Talks | Networking Opportunities | Free Pizza</p>
        </div>
    </footer>


    <!-- Meeting Script -->
    <script>
        // Get meeting data
        (async () => {
            const response = await fetch('./data/meetings.json');
            const data = await response.json();

            const meeting = data.meetings[0];
            
            // Set meeting data
            document.getElementById('meeting-title').textContent = meeting.title;
            document.getElementById('meeting-speaker').textContent = meeting.speaker;
            document.getElementById('meeting-description-large').innerHTML = meeting.description;
            document.getElementById('meeting-description-medium').innerHTML = meeting.description;
            document.getElementById('meeting-image').src = meeting.thumbnail;
            document.getElementById('meeting-location').textContent = `Location: ${meeting.location}`;
            document.getElementById('meeting-schedule').innerHTML = meeting.schedule;

            // Set meeting buttons
            const buttons = document.getElementById('meeting-buttons');
            meeting.buttons.forEach(button => {
                const a = document.createElement('a');
                a.textContent = button.text;
                a.href = button.link;
                a.className = 'btn';
                a.target = '_blank';
                buttons.appendChild(a);
            });

            // Set countdown
            const countdown = setInterval(() => {
                const distance = new Date(meeting.date) - new Date().getTime();

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                document.querySelector('.timer-days').textContent = days.toString().padStart(2, '0');
                document.querySelector('.timer-hours').textContent = hours.toString().padStart(2, '0');
                document.querySelector('.timer-minutes').textContent = minutes.toString().padStart(2, '0');
                document.querySelector('.timer-seconds').textContent = seconds.toString().padStart(2, '0');

                if (distance < 0) {
                    clearInterval(countdown);
                    document.querySelector('.timer-clock').innerHTML = '<p class="timer-expired">Meeting Expired</p>';
                }
            }, 1000);
        })();
    </script>
</body>

</html>